<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Tokyo Hotels & Disneyland</title>
    <style>
        body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
        #map { height: 100vh; width: 100%; }
        
        /* Ïñ∏Ïñ¥ ÏÑ†ÌÉù Î≤ÑÌäº */
        .lang-selector {
            position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
            z-index: 1000; background: white; padding: 8px;
            border-radius: 5px; box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            display: flex; gap: 5px;
        }
        .lang-btn {
            padding: 8px 16px; border: none; background: #f5f5f5;
            cursor: pointer; border-radius: 3px; font-size: 14px;
            transition: all 0.2s;
        }
        .lang-btn:hover { background: #e0e0e0; }
        .lang-btn.active { background: #006FCF; color: white; }
        
        .search-box {
            position: absolute; top: 70px; left: 10px; z-index: 1000;
            background: white; padding: 10px; border-radius: 5px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3); width: 250px;
        }
        .search-box input {
            width: 100%; padding: 8px; border: 1px solid #ddd;
            border-radius: 3px; font-size: 14px;
        }
        .search-results { max-height: 300px; overflow-y: auto; margin-top: 5px; }
        .search-item {
            padding: 8px; cursor: pointer; border-bottom: 1px solid #eee; font-size: 12px;
        }
        .search-item:hover { background: #f5f5f5; }
        
        .tutorial-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 2000;
            display: flex; align-items: center; justify-content: center;
        }
        .tutorial-box {
            background: white; padding: 30px; border-radius: 10px;
            max-width: 500px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            max-height: 80vh; overflow-y: auto;
        }
        .tutorial-title {
            font-size: 24px; font-weight: bold; margin-bottom: 20px; color: #006FCF;
        }
        .tutorial-step {
            margin: 15px 0; padding: 10px; background: #f5f5f5;
            border-radius: 5px; font-size: 14px; line-height: 1.6;
        }
        .tutorial-btn {
            background: #006FCF; color: white; border: none;
            padding: 12px 24px; border-radius: 5px; cursor: pointer;
            font-size: 16px; margin-top: 20px; width: 100%;
        }
        .tutorial-btn:hover { background: #0056A3; }
        
        .legend {
            position: absolute; top: 70px; right: 10px; background: white;
            padding: 15px; border-radius: 5px; box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            z-index: 1000; max-width: 280px;
        }
        .legend-title { font-weight: bold; margin-bottom: 10px; font-size: 14px; }
        .legend-item { margin: 8px 0; font-size: 12px; line-height: 1.5; }
        .legend-marker {
            display: inline-block; width: 10px; height: 10px;
            border-radius: 50%; margin-right: 8px;
        }
        .legend-desc { color: #666; font-size: 11px; margin-left: 18px; }
        
        .hotel-name { font-size: 16px; font-weight: bold; color: #006FCF; margin-bottom: 5px; }
        .hotel-brand { font-size: 12px; color: #666; margin-bottom: 5px; }
        .hotel-price { font-size: 14px; color: #00A862; font-weight: bold; margin: 8px 0; }
        .distance-info {
            background: #E3F2FD; padding: 8px; border-radius: 4px;
            margin: 8px 0; font-size: 12px; color: #1565C0;
        }
        .hotel-category {
            display: inline-block; padding: 3px 8px; border-radius: 3px;
            font-size: 10px; font-weight: bold; margin-bottom: 8px;
        }
        .fhr { background-color: #006FCF; color: white; }
        .thc { background-color: #00A862; color: white; }
        .hotel-offer {
            background-color: #FFF4E6; padding: 8px; border-left: 3px solid #FF9800;
            margin: 8px 0; font-size: 12px;
        }
        .hotel-link {
            display: inline-block; margin-top: 8px; padding: 6px 12px;
            background-color: #006FCF; color: white; text-decoration: none;
            border-radius: 3px; font-size: 12px;
        }
    </style>
</head>
<body>
    <!-- Ïñ∏Ïñ¥ ÏÑ†ÌÉù -->
    <div class="lang-selector">
        <button class="lang-btn active" onclick="changeLang('ko')">ÌïúÍµ≠Ïñ¥</button>
        <button class="lang-btn" onclick="changeLang('en')">English</button>
        <button class="lang-btn" onclick="changeLang('ja')">Êó•Êú¨Ë™û</button>
    </div>

    <!-- ÌäúÌÜ†Î¶¨Ïñº -->
    <div id="tutorial" class="tutorial-overlay">
        <div class="tutorial-box">
            <div class="tutorial-title" id="tutorialTitle"></div>
            <div id="tutorialContent"></div>
            <button class="tutorial-btn" onclick="closeTutorial()" id="tutorialBtn"></button>
        </div>
    </div>

    <!-- Í≤ÄÏÉâ -->
    <div class="search-box">
        <input type="text" id="searchInput" placeholder="" onkeyup="searchHotels()">
        <div id="searchResults" class="search-results"></div>
    </div>

    <!-- ÏßÄÎèÑ -->
    <div id="map"></div>
    
    <!-- Î≤îÎ°Ä -->
    <div class="legend" id="legend"></div>

    <script>
        const TRANSLATIONS = {
            ko: {
                title: 'ÎèÑÏøÑ Ìò∏ÌÖî & ÎîîÏ¶àÎãàÎûúÎìú',
                welcome: 'üè® ÎèÑÏøÑ Ìò∏ÌÖî ÏßÄÎèÑÏóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§!',
                fhr_title: 'üîµ ÌååÎûÄÏÉâ ÎßàÏª§ (FHR)',
                fhr_desc: 'Fine Hotels + Resorts - Í∞ùÏã§ ÏóÖÍ∑∏Î†àÏù¥Îìú, Ï°∞Ïãù, Ìò∏ÌÖî ÌÅ¨Î†àÎîß Îì± ÎèÖÏ†ê ÌòúÌÉùÏùÑ Ï†úÍ≥µÌïòÎäî ÌîÑÎ¶¨ÎØ∏ÏóÑ Îü≠ÏÖîÎ¶¨ Ìò∏ÌÖîÏûÖÎãàÎã§.',
                thc_title: 'üü¢ Ï¥àÎ°ùÏÉâ ÎßàÏª§ (THC)',
                thc_desc: 'The Hotel Collection - Î¨¥Î£å Ï°∞ÏãùÍ≥º Í∞ùÏã§ ÏóÖÍ∑∏Î†àÏù¥Îìú(Í∞ÄÎä• Ïãú)Î•º Ï†úÍ≥µÌïòÎäî ÏóÑÏÑ†Îêú Ìò∏ÌÖîÏûÖÎãàÎã§.',
                disney_title: 'üè∞ ÎèÑÏøÑ ÎîîÏ¶àÎãàÎûúÎìú',
                disney_desc: 'ÏÑ± ÏïÑÏù¥ÏΩòÏúºÎ°ú ÌëúÏãúÎê©ÎãàÎã§. Ìò∏ÌÖîÏùÑ ÌÅ¥Î¶≠ÌïòÎ©¥ ÎîîÏ¶àÎãàÎûúÎìúÍπåÏßÄÏùò Í±∞Î¶¨ÏôÄ Ïù¥Îèô ÏãúÍ∞ÑÏùÑ ÌôïÏù∏Ìï† Ïàò ÏûàÏäµÎãàÎã§.',
                search_title: 'üîç Í≤ÄÏÉâ Í∏∞Îä•',
                search_desc: 'Ï¢åÏ∏° ÏÉÅÎã®Ïùò Í≤ÄÏÉâÏ∞ΩÏùÑ ÏÇ¨Ïö©ÌïòÏó¨ Ìò∏ÌÖîÎ™Ö, Î∏åÎûúÎìú, ÏúÑÏπòÎ°ú Í≤ÄÏÉâÌï† Ïàò ÏûàÏäµÎãàÎã§.',
                click_title: 'üí° ÎßàÏª§ ÌÅ¥Î¶≠',
                click_desc: 'ÎßàÏª§Î•º ÌÅ¥Î¶≠ÌïòÎ©¥ Í∞ÄÍ≤©, ÎîîÏ¶àÎãàÎûúÎìúÍπåÏßÄÏùò Í±∞Î¶¨, ÌäπÎ≥Ñ Ïò§Ìçº Îì± ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º Î≥º Ïàò ÏûàÏäµÎãàÎã§.',
                start_btn: 'ÏãúÏûëÌïòÍ∏∞',
                search_placeholder: 'üîç Ìò∏ÌÖî Í≤ÄÏÉâ...',
                no_results: 'Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§',
                legend_title: 'üè® ÎèÑÏøÑ Ìò∏ÌÖî Í∞ÄÏù¥Îìú',
                fhr_legend: 'FHR',
                fhr_legend_desc: 'Fine Hotels + Resorts - ÏïÑÎ©ïÏä§ ÎèÖÏ†ê ÌòúÌÉùÏù¥ ÏûàÎäî ÌîÑÎ¶¨ÎØ∏ÏóÑ Îü≠ÏÖîÎ¶¨',
                thc_legend: 'THC',
                thc_legend_desc: 'The Hotel Collection - Î¨¥Î£å ÌòúÌÉùÏù¥ ÏûàÎäî Ïö∞Ïàò Ìò∏ÌÖî',
                disney_legend: 'ÎèÑÏøÑ ÎîîÏ¶àÎãàÎûúÎìú',
                disney_legend_desc: 'Ìò∏ÌÖî ÌÅ¥Î¶≠ Ïãú Í±∞Î¶¨ ÌëúÏãú',
                total: 'Ï¥ù',
                hotels: 'Í∞ú Ìò∏ÌÖî',
                night: 'Î∞ï',
                view_details: 'ÏÉÅÏÑ∏Î≥¥Í∏∞ ‚Üí',
                by_train: 'Ï†ÑÏ≤† Í∏∞Ï§Ä'
            },
            en: {
                title: 'Tokyo Hotels & Disneyland',
                welcome: 'üè® Welcome to Tokyo Hotels Map!',
                fhr_title: 'üîµ Blue Markers (FHR)',
                fhr_desc: 'Fine Hotels + Resorts - Premium luxury properties with exclusive benefits including room upgrades, daily breakfast, and property credits.',
                thc_title: 'üü¢ Green Markers (THC)',
                thc_desc: 'The Hotel Collection - Curated selection of exceptional hotels offering complimentary breakfast and room upgrades when available.',
                disney_title: 'üè∞ Tokyo Disneyland',
                disney_desc: 'Marked with a castle icon. Click any hotel to see distance and travel time to Disneyland.',
                search_title: 'üîç Search Feature',
                search_desc: 'Use the search box (top-left) to find hotels by name, brand, or location.',
                click_title: 'üí° Click any marker',
                click_desc: 'View hotel details including price, distance to Disneyland, and special offers.',
                start_btn: 'Start Exploring',
                search_placeholder: 'üîç Search hotels...',
                no_results: 'No results found',
                legend_title: 'üè® Tokyo Hotels Guide',
                fhr_legend: 'FHR',
                fhr_legend_desc: 'Fine Hotels + Resorts - Premium luxury with exclusive Amex benefits',
                thc_legend: 'THC',
                thc_legend_desc: 'The Hotel Collection - Exceptional hotels with complimentary perks',
                disney_legend: 'Tokyo Disneyland',
                disney_legend_desc: 'Click hotels to see distance',
                total: 'Total',
                hotels: 'hotels',
                night: 'night',
                view_details: 'View Details ‚Üí',
                by_train: 'by train'
            },
            ja: {
                title: 'Êù±‰∫¨„Éõ„ÉÜ„É´ÔºÜ„Éá„Ç£„Ç∫„Éã„Éº„É©„É≥„Éâ',
                welcome: 'üè® Êù±‰∫¨„Éõ„ÉÜ„É´„Éû„ÉÉ„Éó„Å∏„Çà„ÅÜ„Åì„ÅùÔºÅ',
                fhr_title: 'üîµ Èùí„ÅÑ„Éû„Éº„Ç´„Éº (FHR)',
                fhr_desc: 'Fine Hotels + Resorts - ÂÆ¢ÂÆ§„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ„ÄÅÊúùÈ£ü„ÄÅ„Éõ„ÉÜ„É´„ÇØ„É¨„Ç∏„ÉÉ„Éà„Å™„Å©„ÅÆÁâπÂÖ∏„ÇíÊèê‰æõ„Åô„Çã„Éó„É¨„Éü„Ç¢„É†„É©„Ç∞„Ç∏„É•„Ç¢„É™„Éº„Éõ„ÉÜ„É´„Åß„Åô„ÄÇ',
                thc_title: 'üü¢ Á∑ë„ÅÆ„Éû„Éº„Ç´„Éº (THC)',
                thc_desc: 'The Hotel Collection - ÁÑ°ÊñôÊúùÈ£ü„Å®ÂÆ¢ÂÆ§„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÔºàÁ©∫ÂÆ§Áä∂Ê≥Å„Å´„Çà„ÇãÔºâ„ÇíÊèê‰æõ„Åô„ÇãÂé≥ÈÅ∏„Åï„Çå„Åü„Éõ„ÉÜ„É´„Åß„Åô„ÄÇ',
                disney_title: 'üè∞ Êù±‰∫¨„Éá„Ç£„Ç∫„Éã„Éº„É©„É≥„Éâ',
                disney_desc: 'Âüé„ÅÆ„Ç¢„Ç§„Ç≥„É≥„ÅßË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ„Éõ„ÉÜ„É´„Çí„ÇØ„É™„ÉÉ„ÇØ„Åô„Çã„Å®„ÄÅ„Éá„Ç£„Ç∫„Éã„Éº„É©„É≥„Éâ„Åæ„Åß„ÅÆË∑ùÈõ¢„Å®ÁßªÂãïÊôÇÈñì„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ',
                search_title: 'üîç Ê§úÁ¥¢Ê©üËÉΩ',
                search_desc: 'Â∑¶‰∏ä„ÅÆÊ§úÁ¥¢„Éú„ÉÉ„ÇØ„Çπ„Çí‰ΩøÁî®„Åó„Å¶„ÄÅ„Éõ„ÉÜ„É´Âêç„ÄÅ„Éñ„É©„É≥„Éâ„ÄÅÂ†¥ÊâÄ„ÅßÊ§úÁ¥¢„Åß„Åç„Åæ„Åô„ÄÇ',
                click_title: 'üí° „Éû„Éº„Ç´„Éº„Çí„ÇØ„É™„ÉÉ„ÇØ',
                click_desc: '„Éû„Éº„Ç´„Éº„Çí„ÇØ„É™„ÉÉ„ÇØ„Åô„Çã„Å®„ÄÅ‰æ°Ê†º„ÄÅ„Éá„Ç£„Ç∫„Éã„Éº„É©„É≥„Éâ„Åæ„Åß„ÅÆË∑ùÈõ¢„ÄÅÁâπÂà•„Ç™„Éï„Ç°„Éº„Å™„Å©„ÅÆË©≥Á¥∞ÊÉÖÂ†±„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ',
                start_btn: 'Âßã„ÇÅ„Çã',
                search_placeholder: 'üîç „Éõ„ÉÜ„É´Ê§úÁ¥¢...',
                no_results: 'Ê§úÁ¥¢ÁµêÊûú„Åå„ÅÇ„Çä„Åæ„Åõ„Çì',
                legend_title: 'üè® Êù±‰∫¨„Éõ„ÉÜ„É´„Ç¨„Ç§„Éâ',
                fhr_legend: 'FHR',
                fhr_legend_desc: 'Fine Hotels + Resorts - „Ç¢„É°„ÉÉ„ÇØ„ÇπÈôêÂÆöÁâπÂÖ∏‰ªò„Åç„Éó„É¨„Éü„Ç¢„É†„É©„Ç∞„Ç∏„É•„Ç¢„É™„Éº',
                thc_legend: 'THC',
                thc_legend_desc: 'The Hotel Collection - ÁÑ°ÊñôÁâπÂÖ∏‰ªò„ÅçÂÑ™ËâØ„Éõ„ÉÜ„É´',
                disney_legend: 'Êù±‰∫¨„Éá„Ç£„Ç∫„Éã„Éº„É©„É≥„Éâ',
                disney_legend_desc: '„Éõ„ÉÜ„É´„ÇØ„É™„ÉÉ„ÇØ„ÅßË∑ùÈõ¢Ë°®Á§∫',
                total: 'ÂêàË®à',
                hotels: '„Éõ„ÉÜ„É´',
                night: 'Ê≥ä',
                view_details: 'Ë©≥Á¥∞„ÇíË¶ã„Çã ‚Üí',
                by_train: 'ÈõªËªä„Åß'
            }
        };

        const hotels = [{"name": "Aman Tokyo", "brand": "Aman", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Towering urban sanctuary.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/101609/123038/530/13%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Aman-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Aman-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.812928", "price_usd": {"min": 1200, "max": 3000, "avg": 1800}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Andaz Tokyo Toranomon Hills", "brand": "Andaz", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Cultural urban skyscraper.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/101908/96003/530/01%5FAndaz%5FArtwork%5FNagataTetsuya%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Andaz-Tokyo-Toranomon-Hills?intlink=US-travel-discover-property-results-propertyCard-Andaz-Tokyo-Toranomon-Hills", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.813214", "price_usd": {"min": 400, "max": 800, "avg": 550}, "price_note": "Estimated weekday rate (USD)"}, {"name": "BELLUSTAR TOKYO, A Pan Pacific Hotel", "brand": "Pan Pacific Hotels Group", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Sleek Tokyo tower.", "special_offer": "Complimentary third night", "offer_period": "Book by 03/14/2026 for travel between 01/02/2026 and 03/18/2026.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/483137/106614/530/Studio%5FPremier%5FKing%5FDay1%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Bellustar-Tokyo-A-Pan-Pacific-Hotel?intlink=US-travel-discover-property-results-propertyCard-Bellustar-Tokyo-A-Pan-Pacific-Hotel", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.813570", "price_usd": {"min": 350, "max": 700, "avg": 500}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Bvlgari Hotel Tokyo", "brand": "Bulgari Hotels & Resorts", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Contemporary Italian style.", "special_offer": "US$300 property credit", "offer_period": "Book by 12/30/2025 for travel by 12/31/2025.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/482748/102920/530/1%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Bvlgari-Hotel-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Bvlgari-Hotel-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.813883", "price_usd": {"min": 1000, "max": 2500, "avg": 1500}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Conrad Tokyo", "brand": "Conrad Hotels & Resorts", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Lively city haven.", "special_offer": "Complimentary third night", "offer_period": "Book by 03/16/2026 for travel by 03/19/2026.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/2823/53785/530/Exterior%5Fwith%5FSakura%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Conrad-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Conrad-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.814136", "price_usd": {"min": 450, "max": 900, "avg": 600}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Four Seasons Hotel Tokyo at Marunouchi", "brand": "Four Seasons Hotels and Resorts", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Distinctive urban hideaway.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/100273/31341/530/MAR%5F918%5F%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Four-Seasons-Hotel-Tokyo-At-Marunouchi?intlink=US-travel-discover-property-results-propertyCard-Four-Seasons-Hotel-Tokyo-At-Marunouchi", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.814327", "price_usd": {"min": 600, "max": 1200, "avg": 850}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Four Seasons Hotel Tokyo at Otemachi", "brand": "Four Seasons Hotels and Resorts", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Modern cultural getaway.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/301059/51833/530/FSO%2DCF026686%2D01%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Four-Seasons-Hotel-Tokyo-At-Otemachi?intlink=US-travel-discover-property-results-propertyCard-Four-Seasons-Hotel-Tokyo-At-Otemachi", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.814519", "price_usd": {"min": 700, "max": 1400, "avg": 950}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Grand Hyatt Tokyo", "brand": "Grand Hyatt", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Dynamic urban luxury.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/100237/55583/530/Grand%5FHyatt%5FTokyo%5FKeyakizaka%5FIllumination%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Grand-Hyatt-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Grand-Hyatt-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.814702", "price_usd": {"min": 400, "max": 800, "avg": 550}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Hilton Tokyo", "brand": "Hilton Hotels & Resorts", "category": "THE HOTEL COLLECTION", "location": "Tokyo, Japan", "description": "Modern Japanese retreat.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/300286/127776/530/ExteriorSunsetWithSign%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Hilton-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Hilton-Tokyo", "program_type": "THC", "scraped_at": "2025-11-17T00:55:49.814884", "price_usd": {"min": 250, "max": 500, "avg": 350}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Hotel New Otani Tokyo Executive House Zen", "brand": "Preferred Hotels & Resorts", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Serene urban exclusivity.", "special_offer": "Complimentary third night", "offer_period": "Book by 03/10/2026 for travel by 03/13/2026.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/300784/55896/530/Hotel%5FNew%5FOtani%5FTokyo%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Hotel-New-Otani-Tokyo-Executive-House-Zen?intlink=US-travel-discover-property-results-propertyCard-Hotel-New-Otani-Tokyo-Executive-House-Zen", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.815104", "price_usd": {"min": 300, "max": 600, "avg": 400}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Hotel Toranomon Hills", "brand": "Hyatt", "category": "THE HOTEL COLLECTION", "location": "Tokyo, Japan", "description": "Urban sophisticated retreat.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/483332/113095/530/HTHLPTOKYO%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Hotel-Toranomon-Hills?intlink=US-travel-discover-property-results-propertyCard-Hotel-Toranomon-Hills", "program_type": "THC", "scraped_at": "2025-11-17T00:55:49.815281", "price_usd": {"min": 350, "max": 700, "avg": 500}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Imperial Floors, Imperial Hotel, Tokyo", "brand": "The Leading Hotels of the World", "category": "THE HOTEL COLLECTION", "location": "Tokyo, Japan", "description": "Legendary royal landmark.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/100552/35852/530/Main%5FEntrance%5FSmall%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Imperial-Floors-Imperial-Hotel-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Imperial-Floors-Imperial-Hotel-Tokyo", "program_type": "THC", "scraped_at": "2025-11-17T00:55:49.815465", "price_usd": {"min": 500, "max": 1000, "avg": 700}, "price_note": "Estimated weekday rate (USD)"}, {"name": "InterContinental ANA Tokyo", "brand": "IHG Hotels & Resorts", "category": "THE HOTEL COLLECTION", "location": "Tokyo, Japan", "description": "Elegant dynamic sanctuary.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/20120/18953/530/21%20Hotel%20Exterior%20at%20night%20H1DJ1746s%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Intercontinental-Ana-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Intercontinental-Ana-Tokyo", "program_type": "THC", "scraped_at": "2025-11-17T00:55:49.815646", "price_usd": {"min": 350, "max": 700, "avg": 500}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Janu Tokyo", "brand": "", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Minimalist harmonious escape.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/483659/143494/530/Janu%5FTokyo%5FJapan%5FFB%5FJanu%5FMercato%5F%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Janu-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Janu-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.815831", "price_usd": {"min": 800, "max": 1600, "avg": 1100}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Kimpton Shinjuku Tokyo", "brand": "Kimpton Hotels & Restaurants", "category": "THE HOTEL COLLECTION", "location": "Tokyo, Japan", "description": "Chic urban hideaway.", "special_offer": "Complimentary third night", "offer_period": "Book by 11/28/2025 for travel by 12/19/2025.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/482663/78715/530/16FPrefunction%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Kimpton-Shinjuku-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Kimpton-Shinjuku-Tokyo", "program_type": "THC", "scraped_at": "2025-11-17T00:55:49.816049", "price_usd": {"min": 300, "max": 600, "avg": 400}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Mandarin Oriental, Tokyo", "brand": "Mandarin Oriental Hotel Group", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Sophisticated metropolitan escape.", "special_offer": "Complimentary third night", "offer_period": "Book by 04/02/2026 for travel by 04/06/2026.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/2821/34564/530/MandarinOrientalTokyo%5FDeluxePremierRoom%5FKing%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Mandarin-Oriental-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Mandarin-Oriental-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.816268", "price_usd": {"min": 800, "max": 1600, "avg": 1100}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Palace Hotel Tokyo", "brand": "The Leading Hotels of the World", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Imperial urban retreat.", "special_offer": "Complimentary third night", "offer_period": "Book by 03/17/2026 for travel by 03/20/2026.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/101639/46065/530/PAL%5F0001%2EJPG?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Palace-Hotel-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Palace-Hotel-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.816480", "price_usd": {"min": 600, "max": 1200, "avg": 850}, "price_note": "Estimated weekday rate (USD)"}, {"name": "Shangri-La Tokyo", "brand": "Shangri-La Hotels and Resorts", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Soaring metropolitan views.", "special_offer": "Complimentary third night", "offer_period": "Book by 01/31/2026 for travel by 12/31/2026.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/100420/46196/530/Shangri%2DLaHotelTokyoAreaShots1250531%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/Shangri-la-Tokyo?intlink=US-travel-discover-property-results-propertyCard-Shangri-la-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.816691", "price_usd": {"min": 500, "max": 1000, "avg": 700}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Capitol Hotel Tokyu", "brand": "Preferred Hotels & Resorts", "category": "THE HOTEL COLLECTION", "location": "Tokyo, Japan", "description": "Warm Japanese modernism.", "special_offer": "Complimentary third night", "offer_period": "Book by 12/16/2025 for travel by 12/19/2025.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/20251/121497/530/Main%5FEntrance%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Capitol-Hotel-Tokyu?intlink=US-travel-discover-property-results-propertyCard-The-Capitol-Hotel-Tokyu", "program_type": "THC", "scraped_at": "2025-11-17T00:55:49.816909", "price_usd": {"min": 400, "max": 800, "avg": 550}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Okura Tokyo", "brand": "The Leading Hotels of the World", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Tranquil urban retreat.", "special_offer": "Complimentary third night", "offer_period": "Book by 12/30/2025 for travel between 01/04/2026 and 03/13/2026.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/301006/55900/530/prestigelobby%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Okura-Tokyo?intlink=US-travel-discover-property-results-propertyCard-The-Okura-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.817119", "price_usd": {"min": 500, "max": 1000, "avg": 700}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Peninsula Tokyo", "brand": "The Peninsula Hotels", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Classic urban oasis.", "special_offer": "Complimentary fourth night", "offer_period": "Book by 12/15/2025 for travel by 12/19/2025.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/100115/96442/530/SwimmingPool%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Peninsula-Tokyo?intlink=US-travel-discover-property-results-propertyCard-The-Peninsula-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.817342", "price_usd": {"min": 700, "max": 1400, "avg": 950}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Prince Gallery Tokyo Kioicho, a Luxury Collection Hotel", "brand": "The Luxury Collection", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Chic skyline oasis.", "special_offer": "US$250 food and beverage credit", "offer_period": "Book by 12/16/2025 for travel by 12/19/2025.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/100635/8391/530/Sky%20Gallery%20Lounge%20Levita%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Prince-Gallery-Tokyo-Kioicho-a-Luxury-Collection-Hotel?intlink=US-travel-discover-property-results-propertyCard-The-Prince-Gallery-Tokyo-Kioicho-a-Luxury-Collection-Hotel", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.817558", "price_usd": {"min": 450, "max": 900, "avg": 600}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Prince Park Tower Tokyo", "brand": "Preferred Hotels & Resorts", "category": "THE HOTEL COLLECTION", "location": "Tokyo, Japan", "description": "Urban park retreat.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/300787/104731/530/2Exterior%5Ftwilight%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Prince-Park-Tower-Tokyo?intlink=US-travel-discover-property-results-propertyCard-The-Prince-Park-Tower-Tokyo", "program_type": "THC", "scraped_at": "2025-11-17T00:55:49.817738", "price_usd": {"min": 350, "max": 700, "avg": 500}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Prince Sakura Tower Tokyo, Autograph Collection", "brand": "Autograph Collection Hotels", "category": "THE HOTEL COLLECTION", "location": "Tokyo, Japan", "description": "Tranquil city escape.", "special_offer": "US$100 property credit", "offer_period": "Book by 03/28/2026 for travel by 03/31/2026.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/301021/40984/530/sakuratower%5FExterior%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Prince-Sakura-Tower-Tokyo-Autograph-Collection?intlink=US-travel-discover-property-results-propertyCard-The-Prince-Sakura-Tower-Tokyo-Autograph-Collection", "program_type": "THC", "scraped_at": "2025-11-17T00:55:49.817947", "price_usd": {"min": 300, "max": 600, "avg": 400}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Ritz-Carlton, Tokyo", "brand": "The Ritz-Carlton", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Dramatic metropolitan skyscraper.", "special_offer": "US$250 property credit", "offer_period": "Book by 12/29/2025 for travel by 12/31/2025.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/100114/119783/530/TheRitz%2DCarltonTokyo%2Dexteriorspring%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Ritz-carlton-Tokyo?intlink=US-travel-discover-property-results-propertyCard-The-Ritz-carlton-Tokyo", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.818162", "price_usd": {"min": 800, "max": 1600, "avg": 1100}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Strings by InterContinental Tokyo", "brand": "IHG Hotels & Resorts", "category": "THE HOTEL COLLECTION", "location": "Tokyo, Japan", "description": "Vibrant metropolitan sanctuary.", "special_offer": "Complimentary third night", "offer_period": "Book by 12/02/2025 for travel by 12/23/2025.", "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/20438/78763/530/Strings%2DExterior%2DSakura%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Strings-By-Intercontinental-Tokyo?intlink=US-travel-discover-property-results-propertyCard-The-Strings-By-Intercontinental-Tokyo", "program_type": "THC", "scraped_at": "2025-11-17T00:55:49.818381", "price_usd": {"min": 300, "max": 600, "avg": 400}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Tokyo EDITION, Ginza", "brand": "EDITION Hotels", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Trendy shopping destination.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/483361/114218/530/Exterior%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Tokyo-Edition-Ginza?intlink=US-travel-discover-property-results-propertyCard-The-Tokyo-Edition-Ginza", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.818553", "price_usd": {"min": 500, "max": 1000, "avg": 700}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Tokyo EDITION, Toranomon", "brand": "EDITION Hotels", "category": "FINE HOTELS + RESORTS", "location": "Tokyo, Japan", "description": "Unexpected urban oasis.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/301071/59566/530/TheJadeRoomGardenTerrace%5FTokyoTowerView%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Tokyo-Edition-Toranomon?intlink=US-travel-discover-property-results-propertyCard-The-Tokyo-Edition-Toranomon", "program_type": "FHR", "scraped_at": "2025-11-17T00:55:49.818731", "price_usd": {"min": 500, "max": 1000, "avg": 700}, "price_note": "Estimated weekday rate (USD)"}, {"name": "The Tokyo Station Hotel", "brand": "Small Luxury Hotels of the World", "category": "THE HOTEL COLLECTION", "location": "Tokyo, Japan", "description": "Elegant urban landmark.", "special_offer": null, "offer_period": null, "image_url": "https://www.americanexpress.com/en-us/travel/discover/photos/20078/151871/530/Exterior%2Ejpg?ch=310", "detail_url": "https://www.americanexpress.com/en-us/travel/discover/property/Japan/Tokyo/The-Tokyo-Station-Hotel?intlink=US-travel-discover-property-results-propertyCard-The-Tokyo-Station-Hotel", "program_type": "THC", "scraped_at": "2025-11-17T00:55:49.818907", "price_usd": {"min": 400, "max": 800, "avg": 550}, "price_note": "Estimated weekday rate (USD)"}];
        const DISNEYLAND = { lat: 35.6329, lng: 139.8804 };
        let currentLang = 'ko';
        let map, geocoder, infoWindow;
        const hotelMarkers = [];

        function changeLang(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateUI();
        }

        function updateUI() {
            const t = TRANSLATIONS[currentLang];
            document.title = t.title;
            document.getElementById('searchInput').placeholder = t.search_placeholder;
            updateTutorial();
            updateLegend();
        }

        function updateTutorial() {
            const t = TRANSLATIONS[currentLang];
            document.getElementById('tutorialTitle').textContent = t.welcome;
            document.getElementById('tutorialBtn').textContent = t.start_btn;
            document.getElementById('tutorialContent').innerHTML = `
                <div class="tutorial-step">
                    <strong>${t.fhr_title}</strong><br>
                    <span style="font-size:12px">${t.fhr_desc}</span>
                </div>
                <div class="tutorial-step">
                    <strong>${t.thc_title}</strong><br>
                    <span style="font-size:12px">${t.thc_desc}</span>
                </div>
                <div class="tutorial-step">
                    <strong>${t.disney_title}</strong><br>
                    <span style="font-size:12px">${t.disney_desc}</span>
                </div>
                <div class="tutorial-step">
                    <strong>${t.search_title}</strong><br>
                    <span style="font-size:12px">${t.search_desc}</span>
                </div>
                <div class="tutorial-step">
                    <strong>${t.click_title}</strong><br>
                    <span style="font-size:12px">${t.click_desc}</span>
                </div>
            `;
        }

        function updateLegend() {
            const t = TRANSLATIONS[currentLang];
            document.getElementById('legend').innerHTML = `
                <div class="legend-title">${t.legend_title}</div>
                <div class="legend-item">
                    <span class="legend-marker" style="background:#006FCF"></span><strong>${t.fhr_legend}</strong>
                    <div class="legend-desc">${t.fhr_legend_desc}</div>
                </div>
                <div class="legend-item">
                    <span class="legend-marker" style="background:#00A862"></span><strong>${t.thc_legend}</strong>
                    <div class="legend-desc">${t.thc_legend_desc}</div>
                </div>
                <div class="legend-item">
                    <span style="font-size:18px; margin-right:5px;">üè∞</span><strong>${t.disney_legend}</strong>
                    <div class="legend-desc">${t.disney_legend_desc}</div>
                </div>
                <div style="margin-top:10px; padding-top:10px; border-top:1px solid #eee; font-size:11px; color:#666;">
                    ${t.total}: 29 ${t.hotels}
                </div>
            `;
        }

        function closeTutorial() {
            document.getElementById('tutorial').style.display = 'none';
        }

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 11,
                center: { lat: 35.6762, lng: 139.6503 },
                mapTypeControl: true,
                streetViewControl: false
            });

            geocoder = new google.maps.Geocoder();
            infoWindow = new google.maps.InfoWindow();

            const disneyMarker = new google.maps.Marker({
                position: DISNEYLAND,
                map: map,
                title: 'Tokyo Disneyland',
                icon: {
                    url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">
                            <text x="20" y="30" font-size="35" text-anchor="middle">üè∞</text>
                        </svg>
                    `),
                    scaledSize: new google.maps.Size(40, 40)
                },
                zIndex: 1000
            });

            disneyMarker.addListener('click', () => {
                infoWindow.setContent(`
                    <div style="padding:10px">
                        <div style="font-size:18px; font-weight:bold; color:#FF1493;">
                            üè∞ Tokyo Disneyland
                        </div>
                        <div style="font-size:12px; color:#666; margin-top:5px;">
                            1-1 Maihama, Urayasu, Chiba
                        </div>
                    </div>
                `);
                infoWindow.open(map, disneyMarker);
            });

            hotels.forEach((hotel, i) => {
                setTimeout(() => geocodeHotel(hotel), i * 200);
            });

            updateUI();
        }

        function geocodeHotel(hotel) {
            const address = hotel.name + ', Tokyo, Japan';
            geocoder.geocode({ address: address }, (results, status) => {
                if (status === 'OK') {
                    const position = results[0].geometry.location;
                    hotel.distanceToDisneyland = calculateDistance(position, DISNEYLAND);
                    createMarker(hotel, position);
                }
            });
        }

        function calculateDistance(pos1, pos2) {
            const R = 6371;
            const lat1 = pos1.lat() * Math.PI / 180;
            const lat2 = pos2.lat * Math.PI / 180;
            const dLat = (pos2.lat - pos1.lat()) * Math.PI / 180;
            const dLng = (pos2.lng - pos1.lng()) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1) * Math.cos(lat2) *
                      Math.sin(dLng/2) * Math.sin(dLng/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return (R * c).toFixed(1);
        }

        function createMarker(hotel, position) {
            const color = hotel.program_type === 'FHR' ? '#006FCF' : '#00A862';
            const marker = new google.maps.Marker({
                position: position,
                map: map,
                title: hotel.name,
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    scale: 8,
                    fillColor: color,
                    fillOpacity: 1,
                    strokeColor: 'white',
                    strokeWeight: 2
                }
            });

            hotelMarkers.push({ marker, hotel, position });
            marker.addListener('click', () => {
                infoWindow.setContent(createContent(hotel));
                infoWindow.open(map, marker);
            });
        }

        function createContent(h) {
            const t = TRANSLATIONS[currentLang];
            let price = '';
            if (h.price_usd && h.price_usd.avg) {
                price = `<div class="hotel-price">$$${h.price_usd.avg}/${t.night}</div>
                         <div style="font-size:11px;color:#999">$$${h.price_usd.min} - $$${h.price_usd.max}</div>`;
            }
            
            let distance = '';
            if (h.distanceToDisneyland) {
                const km = h.distanceToDisneyland;
                const time = Math.round(km * 2);
                distance = `<div class="distance-info">
                    üè∞ Tokyo Disneyland: ${km} km (~${time} min ${t.by_train})
                </div>`;
            }
            
            let offer = '';
            if (h.special_offer) {
                offer = `<div class="hotel-offer">
                    <div style="font-weight:bold;color:#E65100">${h.special_offer}</div>
                    ${h.offer_period ? `<div style="font-size:10px;margin-top:3px">${h.offer_period}</div>` : ''}
                </div>`;
            }

            return `<div style="max-width:320px">
                <div class="hotel-name">${h.name}</div>
                ${h.brand ? `<div class="hotel-brand">${h.brand}</div>` : ''}
                <div class="hotel-category ${h.program_type.toLowerCase()}">${h.category}</div>
                ${price}
                ${distance}
                ${h.description ? `<div style="font-size:13px;margin:8px 0">${h.description}</div>` : ''}
                ${offer}
                <a href="${h.detail_url}" target="_blank" class="hotel-link">${t.view_details}</a>
            </div>`;
        }

        function searchHotels() {
            const t = TRANSLATIONS[currentLang];
            const query = document.getElementById('searchInput').value.toLowerCase();
            const results = document.getElementById('searchResults');
            
            if (!query) {
                results.innerHTML = '';
                return;
            }
            
            const matches = hotelMarkers.filter(item => {
                const h = item.hotel;
                return h.name.toLowerCase().includes(query) ||
                       (h.brand && h.brand.toLowerCase().includes(query)) ||
                       h.location.toLowerCase().includes(query);
            });
            
            if (matches.length === 0) {
                results.innerHTML = `<div style="padding:8px;color:#999">${t.no_results}</div>`;
                return;
            }
            
            results.innerHTML = matches.map(item => {
                const h = item.hotel;
                return `<div class="search-item" onclick="zoomToHotel(${hotelMarkers.indexOf(item)})">
                    <strong>${h.name}</strong><br>
                    <span style="font-size:11px;color:#666">${h.brand || h.location}</span>
                </div>`;
            }).join('');
        }

        function zoomToHotel(index) {
            const item = hotelMarkers[index];
            map.setZoom(15);
            map.panTo(item.position);
            infoWindow.setContent(createContent(item.hotel));
            infoWindow.open(map, item.marker);
            document.getElementById('searchInput').value = '';
            document.getElementById('searchResults').innerHTML = '';
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBEx2MQFO-3d8ov2SwhO5znvWq2cMYdup0&callback=initMap"></script>
</body>
</html>